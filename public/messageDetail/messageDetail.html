<div ng-controller="messageDetail">
  <div>
    <h2 style="text-align:center;margin-top:40px">Message</h2>
    <table class="messageDetailTable table">
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td>
          </td>
          <td style="text-align:right"><img class="message" src="/app-content/img/reply.png" ng-click="replyMethod()"></td>
          <td style="text-align:center"><img class="message" src="/app-content/img/delete.png" ng-click="detele()"></td>
        </tr>
        <tr>
          <td>{{message.title}}</td>
          <td></td>
          <td colspan="2" style="text-align:right">{{message.created_at}}</td>
          <td style="text-align:center">
            <img class="importantIcon" src="/app-content/img/clicked.png" ng-if="isImportant(message)" ng-click="flag(message.id, $event)">
            <img class="importantIcon" src="/app-content/img/unclicked.png" ng-if="!isImportant(message)" ng-click="flag(message.id, $event)">
          </td>
        </tr>
        <tr><td colspan="5">From: {{message.sender}}</td></tr>
        <tr><td colspan="5">To: {{message.recipient}}</td></tr>
        <tr><td colspan="5">{{message.description}}</td></tr>
      </tbody>
    </table>
    
    <form id="reply" ng-if="reply" class="replyForm">
      <textarea name="reply" form="reply" class="replyText" ng-model="replyMessage.description">Enter reply here...
      </textarea>
      <button class="btn btn-primary replyBtn" ng-click="submitReply()">Reply</button>
    </form>

    <div ng-if="message.reply.length != 0" style="width:80%;margin:20px auto 0 auto;">
      <h4 style="text-align:center">Reply</h4>
      <table class="table table-striped table-hover">
        <tr>
          <th colspan="2" style="text-align:center">Sender</th>
          <th colspan="2" style="text-align:center">Recipient</th>
          <th>Title</th>
          <th>Date</th>
        </tr>
        <tr ng-repeat="reply in message.reply">
          <td>{{reply.sender}}</td>
          <td>{{reply.sender}}</td>
          <td>{{reply.recipient}}</td>
          <td>{{reply.recipient}}</td>
          <td>{{reply.title}}</td>
          <td>{{reply.created_at}}</td>
        </tr>
      </table>
    </div>
  </div>

</div>